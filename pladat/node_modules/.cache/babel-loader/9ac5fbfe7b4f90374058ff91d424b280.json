{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\akgun\\\\Desktop\\\\PlaDat\\\\pladat\\\\src\\\\components\\\\SignUpFormStudent.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Form } from 'semantic-ui-react';\nimport $ from \"jquery\";\n\nfunction SignUpFormCompany() {\n  _s();\n\n  const [name, setName] = useState(null);\n  const [surname, setSurname] = useState(null);\n  const [email, setEmail] = useState(null);\n  const [student_university, setStudentUniversity] = useState(null);\n  const [student_ID, setStudentID] = useState(null);\n  const [pass, setPass] = useState(null);\n  const [confirm_pass, setConfirmPass] = useState(null);\n  const [name_error, setNameError] = useState(null);\n  const [surname_error, setSurnameError] = useState(null);\n  const [email_error, setEmailError] = useState(null);\n  const [student_ID_error, setStudentIDError] = useState(null);\n  const [pass_error, setPassError] = useState([]);\n  const [confirm_pass_error, setConfirmPassError] = useState(null);\n  const [loaded, setLoaded] = useState(false);\n  const [university, setUniversity] = useState(null); //TODO: Add validation criteria for student ID\n\n  function isValid() {\n    var format = /[ `!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?~]/;\n\n    function hasUpper(str) {\n      return /[A-Z]/.test(str);\n    }\n\n    if (!name.trim()) {\n      setNameError(prevState => prevState = \"Name is required\");\n    }\n\n    if (!surname.trim()) {\n      setSurnameError(prevState => prevState = \"Surname is required\");\n    }\n\n    if (!email.trim()) {\n      setEmailError(prevState => prevState = \"Email required\");\n    } else if (!/^[A-Z0-9._%+-]+@[[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(email)) {\n      setEmailError(prevState => prevState = \"Email is invalid\");\n    }\n\n    if (!pass) {\n      setPassError(prevState => prevState.concat(\"Password is required\"));\n    }\n\n    if (pass.length < 8) {\n      setPassError(prevState => prevState.concat(\"Password needs to be at least 8 characters\\n\"));\n    }\n\n    if (!format.test(pass)) {\n      setPassError(prevState => prevState.concat(\"Passwords must contain at least one special character\\n\"));\n    }\n\n    if (!hasUpper(pass)) {\n      setPassError(prevState => prevState.concat(\"Password must contain at leat one upper case character\\n\"));\n    }\n\n    if (!confirm_pass) {\n      setConfirmPassError(prevState => prevState = \"This field is required\");\n    } else if (pass !== confirm_pass) {\n      setConfirmPassError(prevState => prevState = \"Passwords must match\");\n    }\n  }\n\n  function updateState(func, e) {\n    func(prevState => prevState = e.target.value);\n  } //FIXME: Con't show the error messages\n\n\n  function handleError() {\n    $(function () {\n      $(\"#submit\").on(\"click\", function () {\n        $(\"#nameInput\").attr(\"error\", {\n          content: name_error\n        });\n        $(\"#surnameInput\").attr(\"error\", {\n          content: surname_error\n        });\n        $(\"#emailInput\").attr(\"error\", {\n          content: email_error\n        });\n        $(\"#passInput\").attr(\"error\", {\n          content: pass_error\n        });\n        $(\"#confirmPassInput\").attr(\"error\", {\n          content: confirm_pass_error\n        });\n      });\n    });\n  } //TODO: Check for if the email has already been used\n\n\n  async function postData() {\n    const student = {\n      name: name,\n      surname: surname,\n      email: email,\n      university: student_university,\n      studentID: student_ID,\n      password: pass\n    };\n    const response = await fetch(\"/SignUpStudent\", {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      \"body\": JSON.stringify(student)\n    });\n\n    if (response.ok) {\n      console.log(\"okkkk\");\n    } else {\n      console.log(\"nöööö\");\n    }\n  }\n\n  function formatUniversity(data) {\n    var formatted_array = [];\n\n    for (var i = 0; i < data.length; i++) {\n      formatted_array.push({\n        key: data[i]._id,\n        text: data[i].name,\n        value: data[i]._id\n      });\n    }\n\n    return formatted_array;\n  }\n\n  async function getUniversity() {\n    const response = await fetch(\"/GetUniversity\");\n    const data = await response.json();\n    const uni = formatUniversity(data);\n    setUniversity(prevData => prevData = uni);\n    setLoaded(prevData => prevData = true);\n  }\n\n  function hasError() {\n    if (name_error === null || surname_error === null || email_error === null || pass_error === null || student_ID_error === null || confirm_pass_error === null || student_university !== null) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    isValid();\n\n    if (!hasError()) {\n      postData();\n    } else {\n      handleError();\n    } //handleError();\n\n  }\n\n  if (university === null) {\n    getUniversity();\n  }\n\n  if (loaded === true) {\n    const element = document.getElementById(\"form\");\n    element.classList.remove(\"loading\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      id: \"form\",\n      onSubmit: e => handleSubmit(e),\n      loading: true,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Form.Input, {\n          id: \"nameInput\",\n          fluid: true,\n          label: \"Name\",\n          placeholder: \"Name\",\n          value: name,\n          onChange: e => updateState(setName, e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Form.Input, {\n          id: \"surnameInput\",\n          fluid: true,\n          label: \"Surname\",\n          placeholder: \"Surname\",\n          value: surname,\n          onChange: e => updateState(setSurname, e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Form.Input, {\n          id: \"emailInput\",\n          fluid: true,\n          type: \"email\",\n          label: \"Email\",\n          placeholder: \"Email\",\n          value: email,\n          onChange: e => updateState(setEmail, e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Form.Select, {\n          fluid: true,\n          selection: true,\n          label: \"University\",\n          options: university,\n          placeholder: \"University\",\n          onChange: (e, {\n            value\n          }) => setStudentUniversity(prevData => prevData = value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Form.Input, {\n          id: \"studentIDInput\",\n          fluid: true,\n          label: \"Student ID\",\n          placeholder: \"Student ID\",\n          value: student_ID,\n          onChange: e => updateState(setStudentID, e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Form.Input, {\n          id: \"passInput\",\n          fluid: true,\n          label: \"Enter Password\",\n          type: \"password\",\n          value: pass,\n          onChange: e => updateState(setPass, e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Form.Input, {\n          id: \"confirmPassInput\",\n          fluid: true,\n          label: \"Confirm Password\",\n          type: \"password\",\n          value: confirm_pass,\n          onChange: e => updateState(setConfirmPass, e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Button, {\n        id: \"submit\",\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SignUpFormCompany, \"CPU4ECHYylcQzDL0uZCUD34pu7E=\");\n\n_c = SignUpFormCompany;\nexport default SignUpFormCompany;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUpFormCompany\");","map":{"version":3,"sources":["C:/Users/akgun/Desktop/PlaDat/pladat/src/components/SignUpFormStudent.js"],"names":["React","useState","Form","$","SignUpFormCompany","name","setName","surname","setSurname","email","setEmail","student_university","setStudentUniversity","student_ID","setStudentID","pass","setPass","confirm_pass","setConfirmPass","name_error","setNameError","surname_error","setSurnameError","email_error","setEmailError","student_ID_error","setStudentIDError","pass_error","setPassError","confirm_pass_error","setConfirmPassError","loaded","setLoaded","university","setUniversity","isValid","format","hasUpper","str","test","trim","prevState","concat","length","updateState","func","e","target","value","handleError","on","attr","content","postData","student","studentID","password","response","fetch","method","headers","JSON","stringify","ok","console","log","formatUniversity","data","formatted_array","i","push","key","_id","text","getUniversity","json","uni","prevData","hasError","handleSubmit","preventDefault","element","document","getElementById","classList","remove"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\r\nimport { Form } from 'semantic-ui-react'\r\nimport $ from \"jquery\";\r\n\r\n\r\nfunction SignUpFormCompany(){\r\n\r\n  const [name, setName] = useState(null)\r\n  const [surname, setSurname] = useState(null)\r\n  const [email, setEmail] = useState(null)\r\n  const [student_university, setStudentUniversity] = useState(null)\r\n  const [student_ID, setStudentID] = useState(null)\r\n  const [pass, setPass] = useState(null)\r\n  const [confirm_pass, setConfirmPass] = useState(null)\r\n  const [name_error,setNameError] =useState(null)\r\n  const [surname_error,setSurnameError] =useState(null)\r\n  const [email_error,setEmailError] =useState(null)\r\n  const [student_ID_error, setStudentIDError] = useState(null)\r\n  const [pass_error,setPassError] = useState([])\r\n  const [confirm_pass_error,setConfirmPassError] = useState(null)\r\n  const [loaded,setLoaded] = useState(false);\r\n  const [university, setUniversity] = useState(null);\r\n\r\n\r\n  //TODO: Add validation criteria for student ID\r\n  function isValid(){\r\n    var format = /[ `!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?~]/;\r\n    function hasUpper(str){\r\n      return (/[A-Z]/.test(str))\r\n    }\r\n    if(!name.trim()){\r\n      setNameError(prevState => prevState = \"Name is required\")\r\n    }\r\n    if(!surname.trim()){\r\n      setSurnameError(prevState => prevState = \"Surname is required\")\r\n    }\r\n    if(!email.trim()){\r\n      setEmailError(prevState => prevState = \"Email required\") \r\n    }else if(!/^[A-Z0-9._%+-]+@[[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(email)){\r\n      setEmailError(prevState => prevState = \"Email is invalid\");\r\n    }\r\n    if(!pass){\r\n      setPassError(prevState => prevState.concat(\"Password is required\"));\r\n    }if(pass.length < 8){\r\n      setPassError(prevState => prevState.concat(\"Password needs to be at least 8 characters\\n\"));\r\n    }if(!format.test(pass)){\r\n      setPassError(prevState => prevState.concat(\"Passwords must contain at least one special character\\n\"));\r\n    }if(!hasUpper(pass)){\r\n      setPassError(prevState => prevState.concat(\"Password must contain at leat one upper case character\\n\"));\r\n    }\r\n    if(!confirm_pass){\r\n      setConfirmPassError(prevState => prevState = \"This field is required\") ;\r\n    }else if(pass !== confirm_pass){\r\n      setConfirmPassError(prevState => prevState = \"Passwords must match\");\r\n    }\r\n  }\r\n\r\n  function updateState(func,e){\r\n    func(prevState => prevState = e.target.value)\r\n  }\r\n\r\n  //FIXME: Con't show the error messages\r\n  function handleError() {\r\n    $(function(){\r\n      $(\"#submit\").on(\"click\",function(){\r\n        $(\"#nameInput\").attr(\"error\",{ content: name_error});\r\n        $(\"#surnameInput\").attr(\"error\",{ content: surname_error});\r\n        $(\"#emailInput\").attr(\"error\",{ content: email_error});\r\n        $(\"#passInput\").attr(\"error\",{ content: pass_error});\r\n        $(\"#confirmPassInput\").attr(\"error\",{ content: confirm_pass_error});\r\n      })\r\n    })\r\n    }\r\n\r\n  //TODO: Check for if the email has already been used\r\n  async function postData(){\r\n    const student = {name:name,surname:surname,email:email,university:student_university,studentID:student_ID,password:pass};\r\n    const response = await fetch(\"/SignUpStudent\",{\r\n      method:\"POST\",\r\n      headers:{\r\n        \"Content-type\":\"application/json; charset=UTF-8\"\r\n      },\r\n      \"body\":JSON.stringify(student)\r\n    }) \r\n    if(response.ok){\r\n      console.log(\"okkkk\")\r\n    }\r\n    else{\r\n      console.log(\"nöööö\")\r\n    }\r\n  }\r\n  function formatUniversity(data){\r\n    var formatted_array = []\r\n    for(var i = 0;i<data.length;i++){\r\n      formatted_array.push({key:data[i]._id,text:data[i].name,value:data[i]._id})\r\n    }\r\n    return formatted_array\r\n  }  \r\n\r\n  async function getUniversity(){\r\n    const response = await fetch(\"/GetUniversity\")\r\n    const data = await response.json();\r\n    const uni = formatUniversity(data);\r\n    setUniversity(prevData => prevData = uni);\r\n    setLoaded(prevData => prevData = true);\r\n  }\r\n  \r\n  function hasError(){\r\n    if(name_error === null || surname_error === null || email_error === null || pass_error === null || student_ID_error === null || confirm_pass_error === null || student_university !== null){\r\n      return false;\r\n    }\r\n    else{\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  async function handleSubmit(e){\r\n    e.preventDefault();\r\n    isValid();\r\n    if(!hasError()){\r\n      postData();\r\n    }\r\n    else{\r\n      handleError();\r\n    }\r\n    //handleError();\r\n  }\r\n\r\n  if(university === null){\r\n    getUniversity();\r\n  }\r\n  if(loaded === true){\r\n    const element = document.getElementById(\"form\");\r\n    element.classList.remove(\"loading\");\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Form id = \"form\" onSubmit = {e => handleSubmit(e)} loading>\r\n        <div>\r\n          <Form.Input id = \"nameInput\" fluid label='Name' placeholder='Name' value={name} onChange={e => updateState(setName,e)}/>\r\n        </div>\r\n        <div>\r\n          <Form.Input id = \"surnameInput\" fluid label='Surname' placeholder='Surname' value={surname} onChange={e => updateState(setSurname,e)}/>\r\n        </div>\r\n        <div>\r\n          <Form.Input id = \"emailInput\" fluid  type=\"email\" label='Email' placeholder='Email' value={email} onChange={e => updateState(setEmail,e)}/>\r\n        </div>\r\n        <div>\r\n        <Form.Select\r\n            fluid\r\n            selection\r\n            label='University'\r\n            options={university}\r\n            placeholder='University'\r\n            onChange={(e, { value }) => setStudentUniversity(prevData => prevData = value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Form.Input id = \"studentIDInput\" fluid label='Student ID' placeholder='Student ID' value={student_ID} onChange={e => updateState(setStudentID,e)}/>\r\n        </div>        \r\n        <div>\r\n          <Form.Input id = \"passInput\" fluid label='Enter Password' type='password' value={pass} onChange={e => updateState(setPass,e)}/>\r\n        </div>\r\n        <div>\r\n          <Form.Input id = \"confirmPassInput\" fluid label='Confirm Password' type='password' value={confirm_pass} onChange={e => updateState(setConfirmPass,e)}/>\r\n        </div>\r\n        <Form.Button id=\"submit\">Sign Up</Form.Button>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignUpFormCompany;"]},"metadata":{},"sourceType":"module"}